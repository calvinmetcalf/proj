{"ts":1357222490675,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"var dd;\r\n//set the options\r\nvar toGeo = communist();\r\ntoGeo.add(\"toGeo\",toGeoJSON);\r\nvar m= L.map('map').setView([42.3584308,-71.0597732], 8);\r\nnew L.Hash(m);\r\nvar mapQuestAttr = 'Tiles Courtesy of <a href=\"http://www.mapquest.com/\">MapQuest</a> &mdash; ';\r\nvar osmDataAttr = 'Map data &copy; <a href=\"http://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors';\r\nvar opt = {\r\n    url: 'http://otile{s}.mqcdn.com/tiles/1.0.0/osm/{z}/{x}/{y}.jpeg',\r\n    urla: 'http://oatile{s}.mqcdn.com/tiles/1.0.0/sat/{z}/{x}/{y}.jpeg',\r\n    options: {attribution:mapQuestAttr + osmDataAttr, subdomains:'1234'}\r\n  };\r\nvar mq=L.tileLayer(opt.url,opt.options);\r\nmq.addTo(m);\r\n\r\n\r\nvar ac;\r\nvar sw=0;\r\n\r\n//create the tiles    \r\n\r\n//create the map\r\n\r\n    var g = L.layerGroup().addTo(m);\r\nvar gl =   L.geoJson({ \"type\": \"FeatureCollection\",  \"features\": []},{pointToLayer:pl,onEachFeature:gjon,filter:filterFunc});\r\nvar gp =   L.geoJson({ \"type\": \"FeatureCollection\",  \"features\": []},{pointToLayer:pl,onEachFeature:gjon,filter:filterFunc});\r\nvar lu= L.geoJson({ \"type\": \"FeatureCollection\",  \"features\": []},{pointToLayer:pl,onEachFeature:luon}).addTo(m);\r\n\r\nfunction luon(e,l) {\r\n    if (e.properties){\r\n        l.bindPopup(makePop(e.properties));\r\n    }if(l.setStyles){\r\n     l.setStyle({color:\"#0000ff\",fillOpacity:1,opacity:1});   \r\n    }\r\n}\r\nfunction filterFunc(feature, layer){\r\n    return \"Status\" in feature.properties;\r\n}\r\n//create empty geojson object and add it to the map\r\n\r\n//create the popups\r\nfunction gjon(e,l) {\r\n    if (e.properties){\r\n        l.bindPopup(makePop(e.properties));\r\n    }if(e.properties.Status&&l.setRadius){\r\n          if(e.properties.Status==\"Completed\"){\r\n        l.setStyle({color:\"#000\",fillColor:\"#0000ff\",fillOpacity:0.8,opacity:1,weight:1});   \r\n       }else if(e.properties.Status==\"Active\"){\r\n        l.setStyle({color:\"#000\",fillColor:\"#ff0000\",fillOpacity:0.8,opacity:1,weight:1});   \r\n       }else{\r\n        l.setStyle({color:\"#000\",fillColor:\"#00ff00\",fillOpacity:0.8,opacity:1,weight:1});   \r\n       }\r\n    }else if(e.properties.Status&&l.setStyle){\r\n        \r\n       if(e.properties.Status==\"Completed\"){\r\n        l.setStyle({color:\"#0000ff\",fillOpacity:0.8,opacity:1});   \r\n       }else if(e.properties.Status==\"Active\"){\r\n        l.setStyle({color:\"#ff0000\",fillOpacity:0.8,opacity:1});   \r\n       }else{\r\n        l.setStyle({color:\"#00ff00\",fillOpacity:0.8,opacity:1});   \r\n       }\r\n    \r\n    }\r\n}\r\nsetStatuses();\r\n/*var icon={\r\n    red:L.icon({iconUrl:\"img/red.png\",iconSize: L.point(9, 9)}),\r\n    yellow:L.icon({iconUrl:\"img/yellow.png\",iconSize:  L.point(9, 9)}),\r\n    green:L.icon({iconUrl:\"img/green.png\",iconSize:  L.point(9, 9)})\r\n}*/\r\n//get the current bounds\r\n//the url. note we're only getting a subset of fields\r\nvar url = {};\r\nurl.line = \"http://services.massdot.state.ma.us/ArcGIS/rest/services/Projects/Project_Lines/MapServer/0/query?\";\r\nurl.point = \"http://services.massdot.state.ma.us/ArcGIS/rest/services/Projects/Project_Points/MapServer/0/query?\";\r\nurl.fields=\"ProjectNumber,District,Location,ProjectType,CompletionDate,BudgetSource,Department,Status,House,Senate,Congress\";\r\nurl.where={};\r\nurl.setW=function(k,v){\r\n url.where[k]=v;   \r\n};\r\nurl.rmW=function(k){\r\n    if(typeof k === \"string\"){\r\n    delete url.where[k];\r\n    }else{\r\n        var len = k.length;\r\n        var i = 0;\r\n        while(i<len){\r\n        if(url.where[k[i]]){\r\n            delete url.where[k[i]];\r\n        }\r\n        i++;\r\n        }\r\n    }\r\n};\r\nurl.getW=function(){\r\n    var a = [];\r\n for(var k in url.where){\r\n     a.push(k+\"%3D%27\"+url.where[k]+\"%27\");\r\n }\r\n return a.join(\"%20AND%20\");\r\n};\r\nurl.end = \"&f=json\";\r\n/*\r\nthe following isn't really neccisary at the moment but might be helpful latter\r\n*/\r\nurl.spacial={\r\n    base:\"&outSR=4326&inSR=4326&geometryType=\",\r\n    sq:\"esriGeometryEnvelope&geometry=\",\r\n    getBBox:function(){url.spacial.bbox=\"-76.1627197265625,40.052847601823984,-65.9564208984375,44.57873024377564\";},//m.getBounds().toBBoxString();},\r\n    getSpatial:function(){\r\n      \r\n     return url.spacial.base+url.spacial.sq+url.spacial.bbox;\r\n    }\r\n    };\r\nurl.spacial.getBBox();\r\n//get the features\r\ngetLayers();\r\n//this is the call back from the jsonp ajax request\r\nfunction parseLine(data){\r\n/*you'd think you'd want to put the command to clear the old layer here instead of after zooming, but the markers are not not visible when you zoom, so it ends up being much less noticeable clearing them earlier*/\r\ntoGeo.send(\"toGeo\",data,function(e,d){gl.addData(d);g.addLayer(gl).addLayer(gp);});\r\nmakeAuto(data);\r\n}\r\nfunction parsePoint(data){\r\n/*you'd think you'd want to put the command to clear the old layer here instead of after zooming, but the markers are not not visible when you zoom, so it ends up being much less noticeable clearing them earlier*/\r\ntoGeo.send(\"toGeo\",data,function(e,d){gp.addData(d)});\r\nmakeAuto(data);\r\n}\r\n/*set up listeners on both drag and zoom events\r\nm.on(\"dragend\",redo);\r\nm.on(\"zoomend\",redo);\r\nthe function called by those event listeners*/\r\nfunction redo(){\r\n\r\n     g.clearLayers();\r\n    gl.clearLayers();\r\n    gp.clearLayers();//clear the current layers\r\n   getLayers();//ajax request\r\n}\r\n//the function called earlier to make the popup, it goes through all the attributes and makes them into a nice key value list\r\nfunction makePop(p){\r\nvar a = [];\r\nfunction up(word){return word.substring(0,1).toUpperCase()+word.substring(1);}\r\nfor(var key in p){\r\n     if (key!==\"Progress\"){\r\n         if (key===\"CompletionDate\"){\r\n             var d =  new Date(parseInt(p[key], 10));\r\n            a.push(key.replace(/(([a-z])([A-Z]))/g,\"$2 $3\")+\": \"+ d.toDateString());\r\n             }else if(key===\"Location\"||key===\"ProjectType\"){\r\n                 var lower = p[key].toLowerCase();\r\n                 var loc = lower.replace(/\\b\\w+\\b/g,up);\r\n                 a.push(key.replace(/(([a-z])([A-Z]))/g,\"$2 $3\")+\": \"+loc);\r\n                 }else{\r\n         var value;\r\n         if ([\"House\",\"Senate\",\"Congress\"].indexOf(key.replace(/(([a-z])([A-Z]))/g,\"$2 $3\")) >= 0){\r\n             value = p[key].replace(/([A-Z])/g,\" $1\").slice(1);\r\n         }else {\r\n             value = p[key];\r\n         }\r\n     a.push(key.replace(/(([a-z])([A-Z]))/g,\"$2 $3\")+\": \"+value);\r\n         }\r\n     }\r\n }\r\n return a.join(\"<br/>\");\r\n}\r\nfunction getLayers(){\r\n    ac={};\r\n    $.get(url.point+\"outFields=\"+url.fields+\"&where=\"+url.getW()+url.end+url.spacial.getSpatial(),parsePoint,\"JSONP\");\r\n    $.get(url.line+\"outFields=\"+url.fields+\"&where=\"+url.getW()+url.end+url.spacial.getSpatial(),parseLine,\"JSONP\");\r\n}\r\nfunction pl(f,latlng){\r\n    return L.circleMarker(latlng,{radius:4});\r\n}\r\n$(function() {\r\n        $( \"#tabs\" ).tabs({\r\n        collapsible: true,\r\n            selected: -1\r\n        });\r\n       $( \"input:submit,input:reset\" ).button();\r\n        $('input, textarea').placeholder();\r\n});\r\nvar marker = new L.Marker();\r\nvar old={};\r\nfunction geocode(){\r\n    old.center=m.getCenter();\r\n    old.zoom=m.getZoom();\r\n var address =$(\"#address\").val();\r\n var gURL = 'http://open.mapquestapi.com/nominatim/v1/search?countrycodes=us&exclude_place_ids=955483008,950010827&viewbox=-76.212158203125%2C44.46123053905882%2C-66.005859375%2C40.107487419012415&bounded=1&format=json&q=';\r\n  $.ajax({\r\n       type: \"GET\",\r\n       url: gURL + address,\r\n       dataType: 'jsonp',\r\n       jsonp: 'json_callback',\r\n       success: function (data, textStatus) {\r\n           if(textStatus==\"success\"){\r\n          var latlng = new L.LatLng(data[0].lat, data[0].lon);\r\n         marker.setLatLng(latlng);\r\n        \r\n         m.addLayer(marker);\r\n         m.setView(latlng,17);\r\n      \r\n           }\r\n       }\r\n  });\r\n  return false;\r\n}\r\n\r\nfunction resetgeo(){\r\n    m.removeLayer(marker);\r\n    m.setView(old.center, old.zoom);\r\n}\r\n$(\"#geocoder\").submit(geocode);\r\n$(\"#resetgeo\").click(resetgeo);\r\n$(\"#getStatus\").change(function(){\r\n      var val = $(\"#getStatus\").val();\r\n      if(val===\"\"){\r\n        url.rmW(\"Status\");\r\n      }else{\r\n        url.setW(\"Status\",val);\r\n      }\r\n      redo();\r\n    });\r\n$(\"#getDi\").change(function(){\r\n      var val = $(\"#getDi\").val();\r\n      if(val===\"\"){\r\n        url.rmW(\"Department\");\r\n      }else{\r\n        url.setW(\"Department\",val); \r\n      }\r\n      redo();\r\n    });\r\nfunction makeAuto(d){\r\n   var f= d.features;\r\n   var len = d.features.length;\r\n   var i = 0;\r\n   dd=[];\r\n   while(i<len){\r\n       dd.push({House:f[i].attributes.House,Senate:f[i].attributes.Senate,Congress:f[i].attributes.Congress});\r\n       if(!ac[f[i].attributes.ProjectNumber]){\r\n       ac[f[i].attributes.ProjectNumber]=d.geometryType;\r\n       }\r\n       i++;\r\n    }\r\nif(sw===0){sw++;}else if(sw===1){\r\n    sw--;\r\n    var a=[];\r\n    for(var k in ac){\r\n     a.push(k);   \r\n    }\r\n    \r\n$(\"#ProjNum\").autocomplete({source:a});\r\n}\r\n}\r\n$(\"#ProjLookUp\").submit(lookUp);\r\nvar b;\r\nfunction lookUp(){\r\n    b= [m.getCenter(),m.getZoom()];\r\n    var t= {esriGeometryPoint:\"point\",esriGeometryPolyline:\"line\"};\r\n    var v=$(\"#ProjNum\").val();\r\n    $.get(url[t[ac[v]]]+\"outFields=\"+url.fields+\"&where=ProjectNumber%3D%27\"+v+\"%27\"+url.end+url.spacial.getSpatial(),parseLookUp,\"JSONP\");\r\n    function parseLookUp(data){\r\n        toGeo.send(\"toGeo\",data,function(e,d){\r\n            lu.addData(d);\r\n            m.fitBounds(lu.getBounds());\r\n            });\r\n    }\r\n   \r\nreturn false;\r\n}\r\n$(\"#ProjReset\").click(function(){\r\n    lu.clearLayers();\r\n    m.setView(b[0],b[1]);\r\n    });\r\nfunction setStatuses(){\r\nvar statuses = [\"Active\",\"Advertised with a Bid\", \"Advertised without a Bid\", \"Completed\", \"Future\", \"Scheduled to be Advertised\"];\r\nvar len = statuses.length;\r\nvar i = 0;\r\nwhile(i<len){\r\n $(\"#getStatus\").append(\"<option value='\"+ statuses[i]+\"'>\"+statuses[i]+\"</option>\");\r\n i++;\r\n}\r\n}\r\n(function(){\r\n    (function(){\r\n        var chambers = [\"House\",\"Senate\",\"Congress\"];\r\n        var frag = document.createDocumentFragment();\r\n        var sel = document.createElement(\"select\");\r\n        sel.id=\"getCham\";\r\n        var makeOpt = function(v,tx){\r\n          var opt = document.createElement(\"option\");  \r\n          opt.value=v;\r\n          opt.innerHTML=tx;\r\n         sel.appendChild(opt); \r\n        };\r\n    \r\n        makeOpt(\"All\",\"Pick a Chamber\");\r\n        var len = chambers.length;\r\n        var i = 0;\r\n        while(i<len){\r\n            makeOpt(chambers[i],chambers[i]);\r\n            i++;\r\n        }\r\n        frag.appendChild(sel);\r\n        var qDiv = document.getElementById(\"query\");\r\n        qDiv.appendChild(frag);\r\n    }());\r\n(function(){\r\n    var sel = $(\"#getCham\");\r\n    toGeo.add(\"getHouses\",function(chamber,data){\r\n        var out = [];\r\n        var len = data.length;\r\n        var i = 0;\r\n        while(i<len){\r\n            var rep = data[i][chamber];\r\n            if(out.indexOf(rep)==-1){\r\n            out.push(rep);\r\n            }\r\n            i++;\r\n        }\r\n        out.sort();\r\n        return out;\r\n    });\r\n    $(\"#query\").on(\"change\",\"#getRep\",function(){\r\n        var val = $(\"#getRep\").val();\r\n        if(val===\"All\"){\r\n            url.rmW(sel.val());\r\n        }else{\r\n            url.setW(sel.val(),val);\r\n        }\r\n         redo();\r\n    });\r\n    sel.change(function(){\r\n        var oDiv = document.getElementById(\"getRep\");\r\n        url.rmW([\"House\",\"Senate\",\"Congress\"]);\r\n        if(oDiv){\r\n            oDiv.parentNode.removeChild(oDiv);\r\n        }\r\n        if(sel.val()!==\"All\"){\r\n            toGeo.send(\"getHouses\",sel.val(),dd,function(err,data){\r\n                var len = data.length;\r\n                var i = 0;\r\n                var frag = document.createDocumentFragment();\r\n                var selc = document.createElement(\"select\");\r\n                selc.id=\"getRep\";\r\n                var makeOpt = function(v,tx){\r\n          var opt = document.createElement(\"option\");  \r\n          opt.value=v;\r\n          opt.innerHTML=tx;\r\n         selc.appendChild(opt); \r\n        };\r\n        makeOpt(\"All\",\"Select A Rep\");\r\n                while(i<len){\r\n                    makeOpt(data[i],data[i].replace(/((?!^)([A-Z]))/g,\" $2\"));\r\n                i++;\r\n                }\r\n                frag.appendChild(selc);\r\n                var qDiv = document.getElementById(\"query\");\r\n        qDiv.appendChild(frag);\r\n            });\r\n        }\r\n    })\r\n}())\r\n}())\r\n\r\n"]],"start1":0,"start2":0,"length1":0,"length2":12238}]],"length":12238}
{"contributors":[],"silentsave":true,"ts":1357222758118,"patch":[[{"diffs":[[0,"ac={};\r\n    "],[-1,"$.get("],[1,"toGeo.send(\"toGeo\""],[0,"url.point+\"o"]],"start1":6325,"start2":6325,"length1":30,"length2":42}]],"length":12250,"saved":false}
{"ts":1357222759321,"patch":[[{"diffs":[[0,"(\"toGeo\""],[1,","],[0,"url.poin"]],"start1":6347,"start2":6347,"length1":16,"length2":17}]],"length":12251,"saved":false}
{"ts":1357222766336,"patch":[[{"diffs":[[0,"rsePoint"],[-1,",\"JSONP\""],[0,");\r\n    "]],"start1":6446,"start2":6446,"length1":24,"length2":16}]],"length":12243,"saved":false}
{"ts":1357222782987,"patch":[[{"diffs":[[0,"atial(),"],[-1,"parsePoint"],[1,"fun"],[0,");\r\n    "]],"start1":6436,"start2":6436,"length1":26,"length2":19}]],"length":12236,"saved":false}
{"ts":1357222784611,"patch":[[{"diffs":[[0,"al(),fun"],[1,"citon()"],[0,");\r\n    "]],"start1":6439,"start2":6439,"length1":16,"length2":23}]],"length":12243,"saved":false}
{"ts":1357222785299,"patch":[[{"diffs":[[0,"unciton("],[1,"e,"],[0,"));\r\n   "]],"start1":6445,"start2":6445,"length1":16,"length2":18}]],"length":12245,"saved":false}
{"ts":1357222787325,"patch":[[{"diffs":[[0,"citon(e,"],[1,"d"],[0,"));\r\n   "]],"start1":6447,"start2":6447,"length1":16,"length2":17}]],"length":12246,"saved":false}
{"ts":1357222788611,"patch":[[{"diffs":[[0,"ton(e,d)"],[1,"{}"],[0,");\r\n    "]],"start1":6449,"start2":6449,"length1":16,"length2":18}]],"length":12248,"saved":false}
{"ts":1357222790223,"patch":[[{"diffs":[[0,"on(e,d){"],[1,"\r\n        \r\n    "],[0,"});\r\n   "]],"start1":6450,"start2":6450,"length1":16,"length2":32}]],"length":12264,"saved":false}
{"ts":1357222795844,"patch":[[{"diffs":[[0,"){\r\n        "],[1,"gp.addData"],[0,"\r\n    });\r\n "]],"start1":6456,"start2":6456,"length1":24,"length2":34}]],"length":12274,"saved":false}
{"ts":1357222797576,"patch":[[{"diffs":[[0,".addData"],[1,"(d)"],[0,"\r\n    })"]],"start1":6470,"start2":6470,"length1":16,"length2":19}]],"length":12277,"saved":false}
{"ts":1357222800159,"patch":[[{"diffs":[[0,"dData(d)"],[1,";"],[0,"\r\n    })"]],"start1":6473,"start2":6473,"length1":16,"length2":17}]],"length":12278,"saved":false}
{"ts":1357222806374,"patch":[[{"diffs":[[0,"l(),func"],[-1,"i"],[0,"t"],[1,"i"],[0,"on(e,d){"]],"start1":6440,"start2":6440,"length1":18,"length2":18}]],"length":12278,"saved":false}
{"ts":1357222891572,"patch":[[{"diffs":[[0,"ddData(d);\r\n"],[1,"        makeAuto(data);\r\n"],[0,"    });\r\n   "]],"start1":6472,"start2":6472,"length1":24,"length2":49}]],"length":12303,"saved":false}
{"ts":1357223013759,"patch":[[{"diffs":[[0,"  makeAuto(d"],[-1,"ata"],[0,");\r\n    });\r"]],"start1":6490,"start2":6490,"length1":27,"length2":24}]],"length":12300,"saved":false}
{"ts":1357223020312,"patch":[[{"diffs":[[0,");\r\n    "],[-1,"$.get("],[1,"toGeo.send(\"toGeo\","],[0,"url.line"]],"start1":6511,"start2":6511,"length1":22,"length2":35}]],"length":12313,"saved":false}
{"ts":1357223028497,"patch":[[{"diffs":[[0,"l(),"],[-1,"parseLine,\"JSONP\");"],[1,",function(e,d){"],[0,"\r\n}\r"]],"start1":6621,"start2":6621,"length1":27,"length2":23}]],"length":12309,"saved":false}
{"ts":1357223031398,"patch":[[{"diffs":[[0,"atial(),"],[-1,","],[0,"function"]],"start1":6617,"start2":6617,"length1":17,"length2":16}]],"length":12308,"saved":false}
{"ts":1357223037833,"patch":[[{"diffs":[[0,"(e,d){\r\n"],[1,"         makeAuto(d);\r\n    });\r\n"],[0,"}\r\nfunct"]],"start1":6633,"start2":6633,"length1":16,"length2":48}]],"length":12340,"saved":false}
{"ts":1357223055146,"patch":[[{"diffs":[[0,"function(e,d){\r\n"],[1,"        gl.addData(d);g.addLayer(gl).addLayer(gp);\r\n"],[0,"         makeAut"]],"start1":6625,"start2":6625,"length1":32,"length2":84}]],"length":12392,"saved":false}
{"contributors":[],"silentsave":false,"ts":1357226184755,"patch":[[{"diffs":[[0,"};\r\n    "],[-1,"toGeo.send(\"toGeo\","],[1,"$.get("],[0,"url.poin"]],"start1":6329,"start2":6329,"length1":35,"length2":22},{"diffs":[[0,"l(),"],[-1,"function(e,d){\r\n        gp.addData(d);\r\n        makeAuto(d);\r\n    });\r\n    toGeo.send(\"toGeo\",url.line+\"outFields=\"+url.fields+\"&where=\"+url.getW()+url.end+url.spacial.getSpatial(),function(e,d){\r\n        gl.addData(d);g.addLayer(gl).addLayer(gp);\r\n         makeAuto(d);\r\n    }"],[1,"parsePoint,\"JSON\");\r\n    $.get(url.line+\"outFields=\"+url.fields+\"&where=\"+url.getW()+url.end+url.spacial.getSpatial(),parseLine,\"JSON\""],[0,");\r\n"]],"start1":6427,"start2":6427,"length1":285,"length2":142},{"diffs":[[0,"Up,\"JSON"],[-1,"P"],[0,"\");\r\n   "]],"start1":9111,"start2":9111,"length1":17,"length2":16}]],"length":12235,"saved":false}
{"contributors":[],"silentsave":false,"ts":1357237182025,"patch":[[{"diffs":[[0,"ac={};\r\n    "],[-1,"$.get("],[1,"toGeo.send(\"toGeo\","],[0,"url.point+\"o"]],"start1":6325,"start2":6325,"length1":30,"length2":43},{"diffs":[[0,"l(),"],[-1,"parsePoint,\"JSON\");\r\n    $.get(url.line+\"outFields=\"+url.fields+\"&where=\"+url.getW()+url.end+url.spacial.getSpatial(),parseLine,\"JSON\""],[1,"function(e,d){\r\n        gp.addData(d);\r\n        makeAuto(d);\r\n    });\r\n    toGeo.send(\"toGeo\",url.line+\"outFields=\"+url.fields+\"&where=\"+url.getW()+url.end+url.spacial.getSpatial(),function(e,d){\r\n        gl.addData(d);g.addLayer(gl).addLayer(gp);\r\n         makeAuto(d);\r\n    }"],[0,");\r\n"]],"start1":6440,"start2":6440,"length1":142,"length2":285},{"diffs":[[0,"se:f[i]."],[-1,"attribut"],[1,"properti"],[0,"es.House"]],"start1":8547,"start2":8547,"length1":24,"length2":24},{"diffs":[[0,"te:f[i]."],[-1,"attribut"],[1,"properti"],[0,"es.Senat"]],"start1":8576,"start2":8576,"length1":24,"length2":24},{"diffs":[[0,"ss:f[i]."],[-1,"attribut"],[1,"properti"],[0,"es.Congr"]],"start1":8608,"start2":8608,"length1":24,"length2":24},{"diffs":[[0,"if(!ac[f[i]."],[-1,"attribut"],[1,"properti"],[0,"es.ProjectNu"]],"start1":8647,"start2":8647,"length1":32,"length2":32},{"diffs":[[0,"ac[f[i]."],[-1,"attribut"],[1,"properti"],[0,"es.Proje"]],"start1":8695,"start2":8695,"length1":24,"length2":24},{"diffs":[[0,"Up,\"JSON"],[1,"P"],[0,"\");\r\n   "]],"start1":9267,"start2":9267,"length1":16,"length2":17}]],"length":12392,"saved":false}
{"contributors":[],"silentsave":false,"ts":1357237271368,"patch":[[{"diffs":[[0,"yer(gp);"],[1,"makeAuto(d);"],[0,"});\r\nmak"]],"start1":4541,"start2":4541,"length1":16,"length2":28},{"diffs":[[0,"\r\nmakeAuto(d"],[-1,"ata"],[0,");\r\n}\r\nfunct"]],"start1":4564,"start2":4564,"length1":27,"length2":24},{"diffs":[[0,"dData(d)"],[-1,"});\r\n"],[1,";"],[0,"makeAuto"]],"start1":4869,"start2":4869,"length1":21,"length2":17},{"diffs":[[0,"to(d"],[-1,"ata);"],[1,");});\r\n"],[0,"\r\n}\r"]],"start1":4884,"start2":4884,"length1":13,"length2":15},{"diffs":[[0,"};\r\n    "],[-1,"toGeo.send(\"toGeo\","],[1,"$.get("],[0,"url.poin"]],"start1":6336,"start2":6336,"length1":35,"length2":22},{"diffs":[[0,"l(),"],[-1,"function(e,d){\r\n        gp.addData(d);\r\n        makeAuto(d);\r\n    });\r\n    toGeo.send(\"toGeo\",url.line+\"outFields=\"+url.fields+\"&where=\"+url.getW()+url.end+url.spacial.getSpatial(),function(e,d){\r\n        gl.addData(d);g.addLayer(gl).addLayer(gp);\r\n         makeAuto(d);\r\n    }"],[1,"parsePoint,\"JSONP\");\r\n    $.get(url.line+\"outFields=\"+url.fields+\"&where=\"+url.getW()+url.end+url.spacial.getSpatial(),parseLine,\"JSONP\""],[0,");\r\n"]],"start1":6434,"start2":6434,"length1":285,"length2":144},{"diffs":[[0,"se:f[i]."],[-1,"properti"],[1,"attribut"],[0,"es.House"]],"start1":8400,"start2":8400,"length1":24,"length2":24},{"diffs":[[0,"te:f[i]."],[-1,"properti"],[1,"attribut"],[0,"es.Senat"]],"start1":8429,"start2":8429,"length1":24,"length2":24},{"diffs":[[0,"ss:f[i]."],[-1,"properti"],[1,"attribut"],[0,"es.Congr"]],"start1":8461,"start2":8461,"length1":24,"length2":24},{"diffs":[[0,"if(!ac[f[i]."],[-1,"properti"],[1,"attribut"],[0,"es.ProjectNu"]],"start1":8500,"start2":8500,"length1":32,"length2":32},{"diffs":[[0,"ac[f[i]."],[-1,"properti"],[1,"attribut"],[0,"es.Proje"]],"start1":8548,"start2":8548,"length1":24,"length2":24}]],"length":12245,"saved":false}
{"ts":1357237304164,"patch":[[{"diffs":[[0,"se:f[i]."],[-1,"attribut"],[1,"properti"],[0,"es.House"]],"start1":8400,"start2":8400,"length1":24,"length2":24},{"diffs":[[0,"te:f[i]."],[-1,"attribut"],[1,"properti"],[0,"es.Senat"]],"start1":8429,"start2":8429,"length1":24,"length2":24},{"diffs":[[0,"ss:f[i]."],[-1,"attribut"],[1,"properti"],[0,"es.Congr"]],"start1":8461,"start2":8461,"length1":24,"length2":24},{"diffs":[[0,"if(!ac[f[i]."],[-1,"attribut"],[1,"properti"],[0,"es.ProjectNu"]],"start1":8500,"start2":8500,"length1":32,"length2":32},{"diffs":[[0,"ac[f[i]."],[-1,"attribut"],[1,"properti"],[0,"es.Proje"]],"start1":8548,"start2":8548,"length1":24,"length2":24}]],"length":12245,"saved":false}
{"ts":1357237353119,"patch":[[{"diffs":[[0,");\r\n"],[-1,"makeAuto(d);\r\n"],[0,"}\r\nf"]],"start1":4562,"start2":4562,"length1":22,"length2":8}]],"length":12231,"saved":false}
{"contributors":[],"silentsave":true,"ts":1357564091230,"patch":[[{"diffs":[[0,"yer(gp);"],[1,"});\r\n"],[0,"makeAuto"]],"start1":4541,"start2":4541,"length1":16,"length2":21},{"diffs":[[0,"Auto(d);"],[-1,"});"],[0,"\r\n}\r\nfun"]],"start1":4558,"start2":4558,"length1":19,"length2":16},{"diffs":[[0,"dData(d)"],[-1,";"],[1,"});\r\n"],[0,"makeAuto"]],"start1":4857,"start2":4857,"length1":17,"length2":21},{"diffs":[[0,"to(d"],[-1,");}"],[1,"ata"],[0,");\r\n"],[-1,"\r\n"],[0,"}\r\n/"]],"start1":4876,"start2":4876,"length1":17,"length2":15},{"diffs":[[0,"ePoint,\"JSON"],[-1,"P"],[0,"\");\r\n    $.g"]],"start1":6432,"start2":6432,"length1":25,"length2":24},{"diffs":[[0,"seLine,\"JSON"],[-1,"P"],[0,"\");\r\n}\r\nfunc"]],"start1":6549,"start2":6549,"length1":25,"length2":24},{"diffs":[[0,"se:f[i]."],[-1,"properti"],[1,"attribut"],[0,"es.House"]],"start1":8388,"start2":8388,"length1":24,"length2":24},{"diffs":[[0,"te:f[i]."],[-1,"properti"],[1,"attribut"],[0,"es.Senat"]],"start1":8417,"start2":8417,"length1":24,"length2":24},{"diffs":[[0,"ss:f[i]."],[-1,"properti"],[1,"attribut"],[0,"es.Congr"]],"start1":8449,"start2":8449,"length1":24,"length2":24},{"diffs":[[0,"if(!ac[f[i]."],[-1,"properti"],[1,"attribut"],[0,"es.ProjectNu"]],"start1":8488,"start2":8488,"length1":32,"length2":32},{"diffs":[[0,"ac[f[i]."],[-1,"properti"],[1,"attribut"],[0,"es.Proje"]],"start1":8536,"start2":8536,"length1":24,"length2":24},{"diffs":[[0,"m\").val();\r\n"],[1,""],[0,"    $.get(ur"]],"start1":8969,"start2":8969,"length1":24,"length2":24},{"diffs":[[0,"Up,\"JSON"],[-1,"P"],[0,"\");\r\n   "]],"start1":9108,"start2":9108,"length1":17,"length2":16}]],"length":12232,"saved":false}
{"ts":1357564093811,"patch":[[{"diffs":[[0,");\r\n"],[-1,"makeAuto(d);"],[0,"\r\n}\r"]],"start1":4550,"start2":4550,"length1":20,"length2":8}]],"length":12220,"saved":false}
{"ts":1357564097729,"patch":[[{"diffs":[[0,"yer(gp);"],[1,"makeAuto(d);"],[0,"});\r\n\r\n}"]],"start1":4541,"start2":4541,"length1":16,"length2":28}]],"length":12232,"saved":false}
{"ts":1357564103401,"patch":[[{"diffs":[[0,"dData(d)"],[1,";makeAuto(d);"],[0,"});\r\nmak"]],"start1":4857,"start2":4857,"length1":16,"length2":29}]],"length":12245,"saved":false}
{"ts":1357564107249,"patch":[[{"diffs":[[0,");\r\n"],[-1,"makeAuto(data);\r\n"],[0,"}\r\n/"]],"start1":4879,"start2":4879,"length1":25,"length2":8}]],"length":12228,"saved":false}
{"ts":1357564146279,"patch":[[{"diffs":[[0,"se:f[i]."],[-1,"attributes"],[1,"proper"],[0,".House,S"]],"start1":8384,"start2":8384,"length1":26,"length2":22}]],"length":12224,"saved":false}
{"ts":1357564147812,"patch":[[{"diffs":[[0,"].proper"],[1,"ties"],[0,".House,S"]],"start1":8390,"start2":8390,"length1":16,"length2":20}]],"length":12228,"saved":false}
{"ts":1357564154327,"patch":[[{"diffs":[[0,"te:f[i]."],[-1,"attribut"],[1,"properti"],[0,"es.Senat"]],"start1":8413,"start2":8413,"length1":24,"length2":24}]],"length":12228,"saved":false}
{"ts":1357564155729,"patch":[[{"diffs":[[0,"ss:f[i]."],[-1,"attribut"],[1,"properti"],[0,"es.Congr"]],"start1":8445,"start2":8445,"length1":24,"length2":24}]],"length":12228,"saved":false}
{"ts":1357564157250,"patch":[[{"diffs":[[0,"if(!ac[f[i]."],[-1,"attribut"],[1,"properti"],[0,"es.ProjectNu"]],"start1":8484,"start2":8484,"length1":32,"length2":32}]],"length":12228,"saved":false}
{"ts":1357564158707,"patch":[[{"diffs":[[0,"ac[f[i]."],[-1,"attribut"],[1,"properti"],[0,"es.Proje"]],"start1":8532,"start2":8532,"length1":24,"length2":24}]],"length":12228,"saved":false}
{"contributors":[],"silentsave":true,"ts":1357577487511,"patch":[[{"diffs":[[0," = \""],[-1,"http://services.massdot.state.ma.us"],[0,"/Arc"]],"start1":2793,"start2":2793,"length1":43,"length2":8}]],"length":12193,"saved":false}
{"ts":1357577490533,"patch":[[{"diffs":[[0,".line = "],[1,"proj.calvinmetcalf.c9.io"],[0,"\"/ArcGIS"]],"start1":2788,"start2":2788,"length1":16,"length2":40}]],"length":12217,"saved":false}
{"ts":1357577492525,"patch":[[{"diffs":[[0,"lf.c9.io"],[1,"+"],[0,"\"/ArcGIS"]],"start1":2812,"start2":2812,"length1":16,"length2":17}]],"length":12218,"saved":false}
{"ts":1357577495997,"patch":[[{"diffs":[[0,"e = "],[-1,"proj.calvinmetcalf.c9.io"],[0,"+\"/A"]],"start1":2792,"start2":2792,"length1":32,"length2":8}]],"length":12194,"saved":false}
{"ts":1357577512833,"patch":[[{"diffs":[[0,".line = "],[1,"location.protocol"],[0,"+\"/ArcGI"]],"start1":2788,"start2":2788,"length1":16,"length2":33}]],"length":12211,"saved":false}
{"ts":1357577515445,"patch":[[{"diffs":[[0,"otocol+\""],[1,"+\""],[0,"/ArcGIS/"]],"start1":2807,"start2":2807,"length1":16,"length2":18}]],"length":12213,"saved":false}
{"ts":1357577516916,"patch":[[{"diffs":[[0,"otocol+\""],[1,"\""],[0,"+\"/ArcGI"]],"start1":2807,"start2":2807,"length1":16,"length2":17}]],"length":12214,"saved":false}
{"ts":1357577520446,"patch":[[{"diffs":[[0,"otocol+\""],[1,"//"],[0,"\"+\"/ArcG"]],"start1":2807,"start2":2807,"length1":16,"length2":18}]],"length":12216,"saved":false}
{"ts":1357577523372,"patch":[[{"diffs":[[0,"ol+\"//\"+"],[1,"locat+"],[0,"\"/ArcGIS"]],"start1":2811,"start2":2811,"length1":16,"length2":22}]],"length":12222,"saved":false}
{"ts":1357577524963,"patch":[[{"diffs":[[0,"/\"+locat"],[1,"ion."],[0,"+\"/ArcGI"]],"start1":2816,"start2":2816,"length1":16,"length2":20}]],"length":12226,"saved":false}
{"ts":1357577525824,"patch":[[{"diffs":[[0,"ocation."],[1,"host"],[0,"+\"/ArcGI"]],"start1":2820,"start2":2820,"length1":16,"length2":20}]],"length":12230,"saved":false}
{"ts":1357577577434,"patch":[[{"diffs":[[0," = \""],[-1,"http://services.massdot.state.ma.us"],[0,"/Arc"]],"start1":2910,"start2":2910,"length1":43,"length2":8}]],"length":12195,"saved":false}
{"ts":1357577579219,"patch":[[{"diffs":[[0,"point = "],[1,"location.protocol+\"//\"+location.host+"],[0,"\"/ArcGIS"]],"start1":2905,"start2":2905,"length1":16,"length2":53}]],"length":12232,"saved":false}
{"contributors":[],"silentsave":true,"ts":1357671071138,"patch":[[{"diffs":[[0,"  $.get("],[-1,"url.point"],[1,"location.protocol+\"//\"+location.host+\"/ArcGIS/rest/services/Projects/Project_Lines/MapServer/0/query?\""],[0,"+\"outFie"]],"start1":6332,"start2":6332,"length1":25,"length2":118},{"diffs":[[0,"get("],[-1,"url[t[ac[v]]]+\""],[1,"location.protocol+\"//\"+location.host+\"/ArcGIS/rest/services/Projects/Project_Lines/MapServer/0/query?outFields=\"+url.fields+\"&where=ProjectNumber%3D%27\"+v+\"%27\"+url.end+url.spacial.getSpatial(),parseLookUp,\"JSON\");\r\n        $.get(location.protocol+\"//\"+location.host+\"/ArcGIS/rest/services/Projects/Project_Points/MapServer/0/query?"],[0,"outF"]],"start1":9080,"start2":9080,"length1":23,"length2":340},{"diffs":[[0,"p,\"JSON\");\r\n"],[1,"\r\n"],[0,"    function"]],"start1":9519,"start2":9519,"length1":24,"length2":26},{"diffs":[[0,"eLookUp(data){\r\n"],[1,"        if(data.features.length>0){\r\n"],[0,"        toGeo.se"]],"start1":9550,"start2":9550,"length1":32,"length2":69},{"diffs":[[0,"         });"],[-1,""],[0,""],[1,"\r\n    }"],[0,"\r\n    }\r\n   "]],"start1":9724,"start2":9724,"length1":24,"length2":31}]],"length":12688,"saved":false}
{"ts":1357671100307,"patch":[[{"diffs":[[0,"ery?"],[-1,"\"+\""],[0,"outF"]],"start1":6437,"start2":6437,"length1":11,"length2":8},{"diffs":[[0,"lds="],[-1,"\"+url.fields+\"&where=\"+url.getW()+url.end+url.spacial.getSpatial()"],[1,"ProjectNumber,District,Location,ProjectType,CompletionDate,BudgetSource,Department,Status,House,Senate,Congress&where=&f=json&outSR=4326&inSR=4326&geometryType=esriGeometryEnvelope&geometry=-76.1627197265625,40.052847601823984,-65.9564208984375,44.57873024377564\""],[0,",par"]],"start1":6447,"start2":6447,"length1":74,"length2":271}]],"length":12882,"saved":false}
{"ts":1357671116303,"patch":[[{"diffs":[[0,"get("],[-1,"url.line+\"outFields=\"+url.fields+\"&where=\"+url.getW()+url.end+url.spacial.getSpatial()"],[1,"location.protocol+\"//\"+location.host+\"/ArcGIS/rest/services/Projects/Project_Lines/MapServer/0/query?outFields=ProjectNumber,District,Location,ProjectType,CompletionDate,BudgetSource,Department,Status,House,Senate,Congress&where=&f=json&outSR=4326&inSR=4326&geometryType=esriGeometryEnvelope&geometry=-76.1627197265625,40.052847601823984,-65.9564208984375,44.57873024377564\""],[0,",par"]],"start1":6742,"start2":6742,"length1":94,"length2":382}]],"length":13170,"saved":false}
{"ts":1357671128250,"patch":[[{"diffs":[[0,"rojects/Project_"],[-1,"Line"],[1,"Point"],[0,"s/MapServer/0/qu"]],"start1":6807,"start2":6807,"length1":36,"length2":37}]],"length":13171,"saved":false}
